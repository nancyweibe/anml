"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var CoverAnim=/*#__PURE__*/function(){function a(b){var c=this;_classCallCheck(this,a),_defineProperty(this,"buttonsEvents",function(){}),_defineProperty(this,"onTouch",function(a){c.states.isTouched=!0,c.states.ts=c.states.isMobile?a.touches[0].clientX:a.touches[0].clientY}),_defineProperty(this,"onstopTouch",function(){c.states.isTouched=!1}),_defineProperty(this,"onWheel",function(a){a=a||window.event,c.states.isPaused=!0;var b=null;if(b=c.states.isMobile?a.deltaX||a.detail||a.wheelDelta:a.deltaY||a.detail||a.wheelDelta,"touchmove"==a.type){var d=null;d=c.states.isMobile?a.changedTouches[0].clientX:a.changedTouches[0].clientY,b=c.states.ts>d?1:-1}0<b?c.move(1):c.move(-1)}),_defineProperty(this,"parseTitles",function(){c.titles=c.container.querySelectorAll(".cover-anim-titles .cover-anim-title"),c.contentTitles=c.container.querySelectorAll(".cover-content-titles .cover-anim-title")}),_defineProperty(this,"move",function(a){c.states.isScroll||(c.states.isScroll=!0,setTimeout(function(){c.states.isScroll=!1,setTimeout(function(){c.states.isPaused=!1},c.options.slideDelay)},1500),1==a?c.states.currentSlide<c.states.length-1?(c.clearSliderStates(),c.states.currentSlide+=a,setTimeout(function(){c.bgsContainers[c.states.currentSlide].classList.add("active")},50),c.bgsContainers[c.states.currentSlide].classList.add("stop"),0<=c.states.currentSlide-1?c.bgsContainers[c.states.currentSlide-1].classList.add("played"):c.bgsContainers[c.states.length-1].classList.add("played"),c.progressSegments[c.states.currentSlide].classList.add("active"),c.clearTitles(),c.titles[c.states.currentSlide]&&c.titles[c.states.currentSlide].classList.add("active")):c.clearSlider():0<c.states.currentSlide&&(c.clearSliderStates(),c.bgsContainers[c.states.currentSlide].classList.add("played"),c.states.currentSlide+=a,setTimeout(function(){c.bgsContainers[c.states.currentSlide].classList.add("active")},50),c.progressSegments[c.states.currentSlide+1].classList.remove("active"),c.clearTitles(),c.titles[c.states.currentSlide]&&c.titles[c.states.currentSlide].classList.add("active")))}),_defineProperty(this,"clearTitles",function(){c.titles.forEach(function(a){a.classList.remove("active")})}),_defineProperty(this,"clearSliderStates",function(){c.bgsContainers.forEach(function(a){a.classList.remove("played"),a.classList.remove("active")})}),_defineProperty(this,"clearSlider",function(){c.states.currentSlide=0,c.bgsContainers.forEach(function(a){a.classList.remove("stop"),a.classList.remove("played"),a.classList.remove("active")}),c.progressSegments.forEach(function(a){a.classList.remove("active")}),c.bgsContainers[c.states.currentSlide].classList.add("active"),c.bgsContainers[c.states.length-1].classList.add("played"),setTimeout(function(){c.bgsContainers[c.states.currentSlide].classList.add("stop")},50),setTimeout(function(){c.progressSegments[c.states.currentSlide].classList.add("active")},50),c.clearTitles(),c.titles[c.states.currentSlide]&&c.titles[c.states.currentSlide].classList.add("active")}),this.options={segments:6,slideDelay:5e3},this.states={currentSlide:0,ts:null,isTouched:!1,isScroll:!1,length:0,direction:1,isPaused:!1,isMobile:!1},this.bgsContainers=[],this.progressSegments=[],this.titles=[],this.contentTitles=[],this.container=document.querySelector(b),this.init()}return _createClass(a,[{key:"init",value:function init(){this.buildBgs(),this.buildBar(),this.parseTitles(),this.scrollEvents(),this.buttonsEvents()}},{key:"open",value:function open(a){var b=this,c=document.querySelector(".cover");this.states.isPaused=!0,this.states.isScroll=!0,setTimeout(function(){b.titles.forEach(function(a){a.querySelector("a").classList.remove("active"),a.classList.remove("active")}),b.contentTitles[a].classList.add("active"),c.classList.add("expanded"),b.container.classList.add("expanded")},600)}},{key:"scrollEvents",value:function scrollEvents(){this.container.addEventListener?"onwheel"in document?this.container.addEventListener("wheel",this.onWheel):"onmousewheel"in document?this.container.addEventListener("mousewheel",this.onWheel):this.container.addEventListener("MozMousePixelScroll",this.onWheel):this.container.attachEvent("onmousewheel",this.onWheel),this.states.isMobile=!(991<window.innerWidth),this.container.addEventListener("touchstart",this.onTouch),this.container.addEventListener("touchstop",this.onstopTouch),this.container.addEventListener("touchmove",this.onWheel)}},{key:"buildBgs",value:function buildBgs(){var a=this;this.bgsContainers=this.container.querySelectorAll(".cover-anim-bg");var b=document.createElement("div"),c=document.createElement("div"),d=[];this.states.length=this.bgsContainers.length,b.classList.add("cover-anim-bg-segment"),this.bgsContainers.forEach(function(e,f){var g=null,h=null;d[f]=[],h=e.querySelector("img"),g=h?"background:url("+h.src+")":"background-color: #000",h&&h.remove();for(var i=0;i<a.options.segments;i++){d[f].push(b.cloneNode());var j=c.cloneNode();j.setAttribute("style",g),d[f][i].appendChild(j),e.appendChild(d[f][i])}})}},{key:"buildBar",value:function buildBar(){var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");this.progressSegments,a.classList.add("cover-anim-progress"),b.classList.add("cover-anim-progress-segment"),c.classList.add("cover-anim-progress-bar"),d.classList.add("cover-anim-progress-label"),this.container.appendChild(a);for(var e=0;e<this.options.segments;e++){this.progressSegments.push(b.cloneNode());var f=d.cloneNode();e<this.bgsContainers.length&&(f.innerHTML="0"+(e+1)),this.progressSegments[e].appendChild(f),this.progressSegments[e].appendChild(c.cloneNode()),a.appendChild(this.progressSegments[e])}}},{key:"show",value:function show(){this.bgsContainers[this.states.currentSlide].classList.add("active")}},{key:"play",value:function play(){var a=this;this.bgsContainers[this.states.currentSlide].classList.add("stop"),this.progressSegments[this.states.currentSlide].classList.add("active"),this.titles[this.states.currentSlide].classList.add("active"),setInterval(function(){a.states.isPaused||a.loop()},this.options.slideDelay)}},{key:"loop",value:function loop(){this.states.isPaused||this.move(1)}}]),a}();